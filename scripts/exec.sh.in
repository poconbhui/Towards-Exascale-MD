#!/usr/bin/env bash

#
# Example usage:
#
#   # Run test suite
#   ./scripts/exec.sh run_tests.rb
#
#   # Run benchmark for 2^9 particles for the replicated distribution
#   # on the core ranges 1-64
#   ./scripts/exec.sh run_benchs.rb 2^9 1-64 replicated
#
# exec.sh.in generates exec.sh when configure.rb is run.
# The values @FC@, @MPIFC@ and @MPIEXEC@ seen in exec.sh.in
# are replaced by the values requested through --FC, --MPIFC
# and --MPIEXEC when running configure.rb.
#
# exec.sh may then be used to quickly run scripts in the scripts
# directory from the command line using ./scripts/exec.sh my_script.rb
# as it sets the appropriate environment variables for these scripts
# and also exports the scripts directory into the PATH.
#
# exec.sh may also be used as "source exec.sh" to set the appropriate
# environment variables in the current terminal, where scripts may then
# be run directly without the ./scripts/exec.sh prefix.
#


# Set the environment variables
export FC=@FC@
export MPIFC=@MPIFC@
export MPIEXEC=@MPIEXEC@


# Find the script directory
script_dir=$(dirname $0)

# Add the script directory to the PATH
export PATH=$script_dir:$PATH


# Execute requested script
exec "$@"
